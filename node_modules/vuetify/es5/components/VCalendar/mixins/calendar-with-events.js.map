{"version":3,"sources":["../../../../src/components/VCalendar/mixins/calendar-with-events.ts"],"names":[],"mappings":"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","sourcesContent":["// Styles\nimport './calendar-with-events.sass'\n\n// Types\nimport { VNode, VNodeData } from 'vue'\n\n// Mixins\nimport CalendarBase from './calendar-base'\n\n// Util\nimport props from '../util/props'\nimport {\n  VTimestamp,\n  getDayIdentifier,\n  parseTime,\n} from '../util/timestamp'\nimport {\n  VEventParsed,\n  VEventInput,\n  parseEvent,\n  isEventOn,\n} from '../util/events'\n\n// Types\ntype VColorFunction = (event: VEventInput) => string\n\ntype VNameFunction = (event: VEventParsed, timedEvent: boolean) => string\n\ntype VTimeToY = (time: VTimestamp | number | string) => number\n\ntype VEventResetCheck = (date: VTimestamp) => void\n\ntype VEventVisualGetOffset = (visual: VEventVisual, visuals: VEventVisual[]) => number\n\ntype VEventGetter = (day: VTimestamp) => VEventParsed[]\n\ntype VEventVisualGetter = (events: VEventParsed[], timed: boolean) => VEventVisual[]\n\ntype VEventVisualToNode<D> = (visual: VEventVisual, index: number, day: D) => VNode\n\ntype VDailyEventsMap = {\n  [date: string]: {\n    parent: HTMLElement\n    more: HTMLElement | null\n    events: HTMLElement[]\n  }\n}\n\ninterface VEventVisual {\n  offset: number\n  event: VEventParsed\n  columnCount: number\n  column: number\n}\n\ninterface VDaySlotScope extends VTimestamp {\n  outside: boolean\n  index: number\n}\n\ninterface VDayBodySlotScope extends VDaySlotScope {\n  timeToY: VTimeToY\n}\n\n/* @vue/component */\nexport default CalendarBase.extend({\n  name: 'calendar-with-events',\n\n  props: props.events,\n\n  computed: {\n    noEvents (): boolean {\n      return this.events.length === 0\n    },\n    parsedEvents (): VEventParsed[] {\n      return this.events.map((input, index) => parseEvent(input, index, this.eventStart, this.eventEnd))\n    },\n    eventColorFunction (): VColorFunction {\n      return typeof this.eventColor === 'function'\n        ? this.eventColor as VColorFunction\n        : () => (this.eventColor as string)\n    },\n    eventTextColorFunction (): VColorFunction {\n      return typeof this.eventTextColor === 'function'\n        ? this.eventTextColor as VColorFunction\n        : () => (this.eventTextColor as string)\n    },\n    eventNameFunction (): VNameFunction {\n      return typeof this.eventName === 'function'\n        ? this.eventName as VNameFunction\n        : (event, timedEvent) => {\n          const name = event.input[this.eventName as string] as string\n          if (event.start.hasTime) {\n            if (timedEvent) {\n              const showStart = event.start.hour < 12 && event.end.hour >= 12\n              const start = this.formatTime(event.start, showStart)\n              const end = this.formatTime(event.end, true)\n              return `<strong>${name}</strong><br>${start} - ${end}`\n            } else {\n              const time = this.formatTime(event.start, true)\n              return `<strong>${time}</strong> ${name}`\n            }\n          }\n          return name\n        }\n    },\n  },\n\n  methods: {\n    formatTime (withTime: VTimestamp, ampm: boolean): string {\n      const suffix = ampm ? (withTime.hour < 12 ? 'a' : 'p') : ''\n      const hour = withTime.hour % 12 || 12\n      const minute = withTime.minute\n\n      return minute > 0\n        ? (minute < 10\n          ? `${hour}:0${minute}${suffix}`\n          : `${hour}:${minute}${suffix}`)\n        : `${hour}${suffix}`\n    },\n    updateEventVisibility () {\n      if (this.noEvents || !this.eventMore) {\n        return\n      }\n\n      const eventHeight = this.eventHeight\n      const eventsMap = this.getEventsMap()\n\n      for (const date in eventsMap) {\n        const { parent, events, more } = eventsMap[date]\n        if (!more) {\n          break\n        }\n        const parentBounds = parent.getBoundingClientRect()\n        const last = events.length - 1\n        let hide = false\n        let hidden = 0\n        for (let i = 0; i <= last; i++) {\n          if (!hide) {\n            const eventBounds = events[i].getBoundingClientRect()\n            hide = eventBounds.bottom + eventHeight > parentBounds.bottom && i !== last\n          }\n          if (hide) {\n            const id = events[i].getAttribute('data-event') as string\n            this.hideEvents(id)\n            hidden++\n          }\n        }\n\n        if (hide) {\n          more.style.display = ''\n          more.innerHTML = this.$vuetify.lang.t(this.eventMoreText, hidden)\n        } else {\n          more.style.display = 'none'\n        }\n      }\n    },\n    hideEvents (id: string) {\n      const elements = this.$refs.events as HTMLElement[]\n\n      elements.forEach(el => {\n        if (el.getAttribute('data-event') === id) {\n          el.style.display = 'none'\n        }\n      })\n    },\n    getEventsMap (): VDailyEventsMap {\n      const eventsMap: VDailyEventsMap = {}\n      const elements = this.$refs.events as HTMLElement[]\n\n      if (!elements || !elements.forEach) {\n        return eventsMap\n      }\n\n      elements.forEach(el => {\n        const date = el.getAttribute('data-date')\n        if (el.parentElement && date) {\n          if (!(date in eventsMap)) {\n            eventsMap[date] = {\n              parent: el.parentElement,\n              more: null,\n              events: [],\n            }\n          }\n          if (el.getAttribute('data-more')) {\n            eventsMap[date].more = el\n          } else {\n            eventsMap[date].events.push(el)\n            el.style.display = ''\n          }\n        }\n      })\n\n      return eventsMap\n    },\n    genDayEvent ({ offset, event }: VEventVisual, index: number, day: VDaySlotScope): VNode {\n      const eventHeight = this.eventHeight\n      const eventMarginBottom = this.eventMarginBottom\n      const relativeOffset = (offset - index) * (eventHeight + eventMarginBottom) // 1 = margin bottom\n      const dayIdentifier = getDayIdentifier(day)\n      const start = dayIdentifier === event.startIdentifier\n      const end = dayIdentifier === event.endIdentifier\n      const scope = { event: event.input, day, outside: day.outside, start, end, timed: false }\n\n      return this.genEvent(event, scope, start || day.index === 0, false, {\n        staticClass: 'v-event',\n        class: {\n          'v-event-start': start,\n          'v-event-end': end,\n        },\n        style: {\n          height: `${eventHeight}px`,\n          top: `${relativeOffset}px`,\n          'margin-bottom': `${eventMarginBottom}px`,\n        },\n        attrs: {\n          'data-date': day.date,\n          'data-event': event.index,\n        },\n        key: event.index,\n        ref: 'events',\n        refInFor: true,\n      })\n    },\n    genTimedEvent ({ offset, event, columnCount, column }: VEventVisual, index: number, day: VDayBodySlotScope): VNode {\n      const dayIdentifier = getDayIdentifier(day)\n      const start = event.startIdentifier >= dayIdentifier\n      const end = event.endIdentifier > dayIdentifier\n      const top = start ? day.timeToY(event.start) : 0\n      const bottom = end ? day.timeToY(1440) : day.timeToY(event.end)\n      const height = Math.max(this.eventHeight, bottom - top)\n      const left = columnCount === -1\n        ? offset * 5\n        : column * 100 / columnCount\n      const right = columnCount === -1\n        ? 0\n        : Math.max(0, (columnCount - column - 2) * 100 / columnCount + 10)\n      const scope = { event: event.input, day, outside: day.outside, start, end, timed: true }\n\n      return this.genEvent(event, scope, true, true, {\n        staticClass: 'v-event-timed',\n        style: {\n          top: `${top}px`,\n          height: `${height}px`,\n          left: `${left}%`,\n          right: `${right}%`,\n        },\n      })\n    },\n    genEvent (event: VEventParsed, scope: object, showName: boolean, timedEvent: boolean, data: VNodeData): VNode {\n      const slot = this.$scopedSlots.event\n      const text = this.eventTextColorFunction(event.input)\n      const background = this.eventColorFunction(event.input)\n\n      return this.$createElement('div',\n        this.setTextColor(text,\n          this.setBackgroundColor(background, {\n            on: this.getDefaultMouseEventHandlers(':event', nativeEvent => ({ ...scope, nativeEvent })),\n            directives: [{\n              name: 'ripple',\n              value: this.eventRipple != null ? this.eventRipple : true,\n            }],\n            ...data,\n          })\n        ), slot\n          ? slot(scope)\n          : (showName ? [this.genName(event, timedEvent)] : undefined)\n      )\n    },\n    genName (event: VEventParsed, timedEvent: boolean): VNode {\n      return this.$createElement('div', {\n        staticClass: 'pl-1',\n        domProps: {\n          innerHTML: this.eventNameFunction(event, timedEvent),\n        },\n      })\n    },\n    genMore (day: VTimestamp): VNode {\n      return this.$createElement('div', {\n        staticClass: 'v-event-more pl-1',\n        attrs: {\n          'data-date': day.date,\n          'data-more': 1,\n        },\n        directives: [{\n          name: 'ripple',\n          value: this.eventRipple != null ? this.eventRipple : true,\n        }],\n        on: {\n          click: () => this.$emit('click:more', day),\n        },\n        style: {\n          display: 'none',\n        },\n        ref: 'events',\n        refInFor: true,\n      })\n    },\n    getEventsForDay (day: VTimestamp): VEventParsed[] {\n      const identifier = getDayIdentifier(day)\n\n      return this.parsedEvents.filter(\n        event => isEventOn(event, identifier)\n      )\n    },\n    getEventsForDayAll (day: VTimestamp): VEventParsed[] {\n      const identifier = getDayIdentifier(day)\n\n      return this.parsedEvents.filter(\n        event => event.allDay && isEventOn(event, identifier)\n      )\n    },\n    getEventsForDayTimed (day: VTimestamp): VEventParsed[] {\n      const identifier = getDayIdentifier(day)\n\n      return this.parsedEvents.filter(\n        event => !event.allDay && isEventOn(event, identifier)\n      )\n    },\n    isSameColumn (a: VEventVisual, b: VEventVisual): boolean {\n      const astart = parseTime(a.event.start) as number\n      const bstart = parseTime(b.event.start) as number\n      const diff = astart - bstart\n      const abs = diff < 0 ? -diff : diff\n\n      return abs < this.eventOverlapThreshold\n    },\n    isOverlapping (a: VEventVisual, b: VEventVisual): boolean {\n      const astart = parseTime(a.event.start) as number\n      const bstart = parseTime(b.event.start) as number\n\n      if (a.offset < b.offset && bstart < astart) {\n        const aend = astart + this.eventOverlapThreshold\n        const bend = parseTime(b.event.end) as number\n        return !(astart >= bend || aend <= bstart)\n      }\n\n      return false\n    },\n    getScopedSlots () {\n      if (this.noEvents) {\n        return this.$scopedSlots\n      }\n\n      /**\n       * Over the span of a week (for example) we want to maintain an event in the same row (for weekly and monthly views).\n       * We keep track of those rows by indexToOffset. If the value in that array is -1, then we can place an event at that spot.\n       * For a daily view with timed events we arrange them based on columns and offsets. If two or more events start at around the\n       * same time (eventOverlapThreshold) they go into columns. If one event starts inside another it is indented the appropriate amount.\n       * If one event overlaps another after those adjustments are made those events are placed in columns together instead of any defined\n       * indents.\n       */\n\n      const parsedEvents = this.parsedEvents\n      const indexToOffset: number[] = parsedEvents.map(event => -1)\n      const resetOnWeekday = this.weekdays[0]\n\n      const checkReset: VEventResetCheck = day => {\n        if (day.weekday === resetOnWeekday) {\n          for (let i = 0; i < indexToOffset.length; i++) {\n            indexToOffset[i] = -1\n          }\n        }\n      }\n\n      const getOffset: VEventVisualGetOffset = (visual, visuals) => {\n        let offset = indexToOffset[visual.event.index]\n        if (offset === -1) {\n          let min = Number.MAX_SAFE_INTEGER\n          let max = -1\n          visuals.forEach(other => {\n            const otherOffset = indexToOffset[other.event.index]\n            if (otherOffset !== -1) {\n              min = Math.min(min, otherOffset)\n              max = Math.max(max, otherOffset)\n            }\n          })\n          offset = min > 0 && max !== -1 ? min - 1 : max + 1\n          indexToOffset[visual.event.index] = offset\n        }\n        return offset\n      }\n\n      const getVisuals: VEventVisualGetter = (events, timed) => {\n        const visuals: VEventVisual[] = events.map(event => ({ event, offset: 0, columnCount: -1, column: -1 }))\n        // sort events by start date/time\n        visuals.sort((a, b) => a.event.startTimestampIdentifier - b.event.startTimestampIdentifier)\n        if (timed) {\n          // timed events can be organized into columns\n          visuals.forEach(visual => {\n            if (visual.columnCount !== -1) {\n              return\n            }\n            const columns: VEventVisual[] = []\n            visuals.forEach(other => {\n              if (other.columnCount === -1 && this.isSameColumn(visual, other)) {\n                columns.push(other)\n              }\n            })\n            if (columns.length > 1) {\n              columns.forEach((visual, visualIndex) => {\n                visual.column = visualIndex\n                visual.columnCount = columns.length\n              })\n            }\n          })\n          // for any not organized into columns, if they overlap another event\n          // not in a column they are offset\n          visuals.forEach(visual => {\n            if (visual.columnCount === -1) {\n              visuals.forEach(other => {\n                const otherOffset = indexToOffset[other.event.index]\n                if (otherOffset !== -1 && other.event.endTimestampIdentifier <= visual.event.startTimestampIdentifier) {\n                  indexToOffset[other.event.index] = -1\n                }\n              })\n              visual.offset = getOffset(visual, visuals)\n            }\n          })\n          // for any not organized into columns, if a previous event overlaps this event\n          // join them into the columns\n          visuals.forEach(visual => {\n            if (visual.columnCount === -1) {\n              const columns: VEventVisual[] = [visual]\n              visuals.forEach(other => {\n                if (other !== visual && other.columnCount === -1 && this.isOverlapping(visual, other)) {\n                  columns.push(other)\n                }\n              })\n              if (columns.length > 1) {\n                columns.forEach((visual, visualIndex) => {\n                  visual.column = visualIndex\n                  visual.columnCount = columns.length\n                })\n              }\n            }\n          })\n        } else {\n          visuals.forEach(visual => {\n            visual.offset = getOffset(visual, visuals)\n          })\n        }\n        visuals.sort((a, b) => (a.column - b.column) || (a.offset - b.offset))\n        return visuals\n      }\n\n      const getSlotChildren = <D extends VDaySlotScope>(day: D, getter: VEventGetter, mapper: VEventVisualToNode<D>, timed: boolean) => {\n        checkReset(day)\n        const events = getter(day)\n        return events.length === 0\n          ? undefined\n          : getVisuals(events, timed).map((visual, index) => mapper(visual, index, day))\n      }\n\n      return {\n        ...this.$scopedSlots,\n        day: (day: VDaySlotScope) => {\n          const children = getSlotChildren(day, this.getEventsForDay, this.genDayEvent, false)\n          if (children && children.length > 0 && this.eventMore) {\n            children.push(this.genMore(day))\n          }\n          return children\n        },\n        'day-header': (day: VDaySlotScope) => {\n          return getSlotChildren(day, this.getEventsForDayAll, this.genDayEvent, false)\n        },\n        'day-body': (day: VDayBodySlotScope) => {\n          return [this.$createElement('div', {\n            staticClass: 'v-event-timed-container',\n          }, getSlotChildren(day, this.getEventsForDayTimed, this.genTimedEvent, true))]\n        },\n      }\n    },\n  },\n})\n"],"sourceRoot":"","file":"calendar-with-events.js"}